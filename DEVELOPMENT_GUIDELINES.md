# 開発方針・ルール

このドキュメントは、社会保険管理アプリの開発における方針とルールを定義しています。
開発作業・コード提案・リファクタリング・設計の相談は、必ずこの方針を前提に行ってください。

---

## ① 全体の進め方（実装フェーズの順番）

### 1. まずは全体をラフに作る
- 画面・ルーティング・ざっくりしたコンポーネント構成を先に用意する。
- この段階では「とりあえず動く最低限」でよく、作り込みはしない／作り込みすぎない ことを優先する。
- ビジネスロジックも必要最低限・仮実装でOK。

### 2. 全体がつながったら、必要な画面・機能を精査する
- 「本当に必要な画面・機能か？」を見直す。
- いらない・優先度が低い画面や機能は、ここで削る／後回しにする。
- 初めて使うユーザー目線で、迷いそうな導線や機能は整理する。

### 3. 必要な画面だけ、機能を肉付け（本実装）していく
- 各画面で必要な入力・計算処理・バリデーション・エラーハンドリングなどを実装する。
- このフェーズでは UIの細かい見た目調整は後回し にし、「正しく動くこと／ビジネスロジックが合っていること」を優先する。

### 4. 最後に UI をまとめて仕上げる
- PCのレイアウト崩れ・余白・文字サイズ・色味などの微調整は、このフェーズで行う。
- 初めて使うユーザーでも迷わないように、ラベル・説明文・メッセージなどを整える。
- このときに「見せ方の工夫」をまとめてやる。前フェーズではやりすぎない。

---

## ② コンポーネント設計のルール（最重要）

### 1. 一つのコンポーネント = 一つの機能・一つの役割
- 1コンポーネントに複数の大きな責務（例：一覧＋詳細＋編集フォーム＋エラー表示）が混ざらないようにする。
- 画面内に「セクション」が複数ある場合、それぞれを別コンポーネントに分けることを優先する。
- 目的：バグ修正時に影響範囲を局所化し、後半の不具合対応を楽にするため。

### 2. 行数の目安（TypeScript / HTML）

#### component.ts
- **理想：100〜200行**
- **上限目安：300行**
- これを超えそうなら、責務を見直し、コンポーネント分割を検討する。

#### component.html
- **理想：50〜150行**
- **上限目安：200〜250行**
- テンプレートが長くなる場合は、UIセクションごとにコンポーネント分割を検討する。

#### service.ts
- ビジネスロジックをまとめるため、ある程度長くなってもよいが、
- 単一サービスが何でもかんでも抱え込まないように、用途ごとに分割する。

### 3. ビジネスロジックはコンポーネントに書かない
- 計算・条件分岐・ドメインルール（例：社会保険の等級判定・年齢判定・介護保険区分判定 など）はService層（*.service.ts）に集約する。
- コンポーネントの役割は「画面制御」と「Serviceの呼び出し」にできるだけ絞る。

### 4. ngOnInit / メソッドが肥大化したら即分割を検討
- ngOnInit や1つのメソッドが長くなり始めたら、ヘルパーメソッドやServiceへの委譲を優先的に行う。
- 「読んで一気に理解できない長さ」になっている場合は設計を見直す。

---

## ③ 実装スタイルの前提

### 1. 垂直スライス（Vertical Slice）で進める
- 「従業員を登録 → 月次給与入力 → 保険料計算 → 一覧表示」といった、ユースケースの1本の流れを 端から端まで1本通す 形で実装する。
- 「機能を横並びで少しずつ」ではなく、「ひとつのシナリオを完成させてから、次のシナリオへ進む」進め方を優先する。

### 2. 既存機能の仕様は、極力壊さない
- 既に動いている機能やロジックは、理由なく大きく変更しない。
- 変更が必要な場合は、「どこを、なぜ変えるのか」が分かるように配慮してコードを提案する。

---

## ④ AI（Cursor / ChatGPT）に対する振る舞いの要望

### 1. 上記方針に反するリファクタリングや大型統合は提案しないでください
- 例：コンポーネントを1つにまとめる提案、大量の責務を1ファイルに集約する提案などはNG。

### 2. コンポーネントが肥大化している場合は、行数・責務の観点から「分割案」を優先的に提案してください

### 3. コード提案時は、この開発方針（ラフ→精査→肉付け→UI仕上げ）を前提に、今どのフェーズをやっているかを尊重してください
- ラフ実装フェーズでは、細かいUI・最適化よりも「動く骨組み」を優先した提案をする。
- 仕上げフェーズに入っているときのみ、UIの細部調整・リファクタリングを積極的に提案してよい。

---

## まとめ

以上が、このプロジェクトにおける **開発方針とルールの前提条件** です。

これ以降の提案・回答・コード生成・リファクタリングは、**必ずこの方針に従って行ってください**。



