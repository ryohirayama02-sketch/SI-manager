<div class="alerts-dashboard">
  <h2>アラート</h2>

  <div class="tabs">
    <button 
      class="tab-button" 
      [class.active]="state.activeTab === 'schedule'"
      [style.border-bottom-color]="state.activeTab === 'schedule' ? state.getTabColor('schedule') : 'transparent'"
      [style.color]="state.getTabColor('schedule')"
      (click)="setActiveTab('schedule')">
      届出スケジュール
    </button>
    <button 
      class="tab-button" 
      [class.active]="state.activeTab === 'bonus'"
      [style.border-bottom-color]="state.activeTab === 'bonus' ? state.getTabColor('bonus') : 'transparent'"
      [style.color]="state.getTabColor('bonus')"
      (click)="setActiveTab('bonus')">
      賞与支払届
    </button>
    <button 
      class="tab-button" 
      [class.active]="state.activeTab === 'suiji'"
      [style.border-bottom-color]="state.activeTab === 'suiji' ? state.getTabColor('suiji') : 'transparent'"
      [style.color]="state.getTabColor('suiji')"
      (click)="setActiveTab('suiji')">
      随時改定アラート
    </button>
    <button 
      class="tab-button" 
      [class.active]="state.activeTab === 'teiji'"
      [style.border-bottom-color]="state.activeTab === 'teiji' ? state.getTabColor('teiji') : 'transparent'"
      [style.color]="state.getTabColor('teiji')"
      (click)="setActiveTab('teiji')">
      定時決定（算定基礎届）
    </button>
    <button 
      class="tab-button" 
      [class.active]="state.activeTab === 'age'"
      [style.border-bottom-color]="state.activeTab === 'age' ? state.getTabColor('age') : 'transparent'"
      [style.color]="state.getTabColor('age')"
      (click)="setActiveTab('age')">
      年齢到達・資格変更
    </button>
    <button 
      class="tab-button" 
      [class.active]="state.activeTab === 'leave'"
      [style.border-bottom-color]="state.activeTab === 'leave' ? state.getTabColor('leave') : 'transparent'"
      [style.color]="state.getTabColor('leave')"
      (click)="setActiveTab('leave')">
      産休・育休
    </button>
    <button 
      class="tab-button" 
      [class.active]="state.activeTab === 'family'"
      [style.border-bottom-color]="state.activeTab === 'family' ? state.getTabColor('family') : 'transparent'"
      [style.color]="state.getTabColor('family')"
      (click)="setActiveTab('family')">
      扶養・氏名・住所変更
    </button>
    <button 
      class="tab-button" 
      [class.active]="state.activeTab === 'uncollected'"
      [style.border-bottom-color]="state.activeTab === 'uncollected' ? state.getTabColor('uncollected') : 'transparent'"
      [style.color]="state.getTabColor('uncollected')"
      (click)="setActiveTab('uncollected')">
      徴収不能
    </button>
  </div>

  <div class="tab-content">
    <!-- 届出スケジュール（マンスリーカレンダー）タブ -->
    <app-alert-schedule-tab
      *ngIf="state.activeTab === 'schedule'"
      [scheduleData]="state.scheduleData"
      [scheduleYear]="state.scheduleYear"
      [scheduleMonth]="state.scheduleMonth"
      (scheduleMonthChange)="onScheduleMonthChange($event)"
      (scheduleYearChange)="onScheduleYearChange($event)"
      (dateClick)="onScheduleDateClick($event)">
    </app-alert-schedule-tab>

    <!-- 賞与支払届タブ -->
    <app-alert-bonus-tab
      *ngIf="state.activeTab === 'bonus'"
      [bonusReportAlerts]="state.bonusReportAlerts"
      [selectedBonusReportAlertIds]="state.selectedBonusReportAlertIds"
      (alertSelectionChange)="onBonusAlertSelectionChange($event)"
      (selectAllChange)="onBonusSelectAllChange($event)"
      (deleteSelected)="deleteSelectedBonusReportAlerts()">
    </app-alert-bonus-tab>

    <!-- 随時改定アラートタブ -->
    <app-alert-suiji-tab
      *ngIf="state.activeTab === 'suiji'"
      [suijiAlerts]="state.suijiAlerts"
      [selectedSuijiAlertIds]="state.selectedSuijiAlertIds"
      [employees]="employees"
      (alertSelectionChange)="onSuijiAlertSelectionChange($event)"
      (selectAllChange)="onSuijiSelectAllChange($event)"
      (deleteSelected)="deleteSelectedSuijiAlerts()">
    </app-alert-suiji-tab>

    <!-- 定時決定（算定基礎届）対象者一覧タブ -->
    <app-alert-teiji-tab
      *ngIf="state.activeTab === 'teiji'"
      [teijiKetteiResults]="state.teijiKetteiResults"
      [teijiYear]="state.teijiYear"
      [availableYears]="state.availableYears"
      [isLoadingTeijiKettei]="isLoadingTeijiKettei"
      (yearChange)="onTeijiYearChange($event)">
    </app-alert-teiji-tab>

    <!-- 年齢到達・資格変更アラートタブ -->
    <app-alert-age-tab
      *ngIf="state.activeTab === 'age'"
      [ageAlerts]="state.ageAlerts"
      [selectedAgeAlertIds]="state.selectedAgeAlertIds"
      [qualificationChangeAlerts]="state.qualificationChangeAlerts"
      [selectedQualificationChangeAlertIds]="state.selectedQualificationChangeAlertIds"
      (ageAlertSelectionChange)="onAgeAlertSelectionChange($event)"
      (ageSelectAllChange)="onAgeSelectAllChange($event)"
      (ageDeleteSelected)="deleteSelectedAgeAlerts()"
      (qualificationChangeAlertSelectionChange)="onQualificationChangeAlertSelectionChange($event)"
      (qualificationChangeSelectAllChange)="onQualificationChangeSelectAllChange($event)"
      (qualificationChangeDeleteSelected)="deleteSelectedQualificationChangeAlerts()">
    </app-alert-age-tab>

    <!-- 産休・育休アラートタブ -->
    <app-alert-leave-tab
      *ngIf="state.activeTab === 'leave'"
      [maternityChildcareAlerts]="state.maternityChildcareAlerts"
      [selectedMaternityChildcareAlertIds]="state.selectedMaternityChildcareAlertIds"
      (alertSelectionChange)="onMaternityChildcareAlertSelectionChange($event)"
      (selectAllChange)="onMaternityChildcareSelectAllChange($event)"
      (deleteSelected)="deleteSelectedMaternityChildcareAlerts()">
    </app-alert-leave-tab>

    <!-- 扶養・氏名・住所変更アラートタブ -->
    <app-alert-family-tab
      *ngIf="state.activeTab === 'family'"
      [supportAlerts]="state.supportAlerts"
      [selectedSupportAlertIds]="state.selectedSupportAlertIds"
      (alertSelectionChange)="onSupportAlertSelectionChange($event)"
      (selectAllChange)="onSupportSelectAllChange($event)"
      (deleteSelected)="deleteSelectedSupportAlerts()">
    </app-alert-family-tab>

    <!-- 徴収不能アラートタブ -->
    <app-alert-uncollected-tab
      *ngIf="state.activeTab === 'uncollected'"
      [employees]="employees">
    </app-alert-uncollected-tab>
  </div>
</div>
