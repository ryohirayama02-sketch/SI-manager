<div class="card" *ngIf="companyMonthlyTotals.length > 0">
  <div
    style="
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.5rem;
    "
  >
    <h3 style="margin: 0">
      月別の保険料一覧（本人分＋会社負担分）（{{ year }}年度）
    </h3>
    <span style="font-size: 0.85rem; color: #666">単位：円</span>
  </div>
  <div class="table-wrapper">
    <table class="payment-table">
      <thead>
        <tr>
          <th>月</th>
          <th>月次<br />健康保険</th>
          <th>月次<br />介護保険</th>
          <th>月次<br />厚生年金</th>
          <th>賞与<br />健康保険</th>
          <th>賞与<br />介護保険</th>
          <th>賞与<br />厚生年金</th>
          <th>合計</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let total of companyMonthlyTotals">
          <td class="month-cell">{{ total.month }}月</td>
          <td class="amount-cell">
            {{ total.healthTotal | number : "1.0-0" }}
          </td>
          <td class="amount-cell">{{ total.careTotal | number : "1.0-0" }}</td>
          <td class="amount-cell">
            {{ total.pensionTotal | number : "1.0-0" }}
          </td>
          <td class="amount-cell">
            {{
              getBonusTotalForMonth(total.month, "health") | number : "1.0-0"
            }}
          </td>
          <td class="amount-cell">
            {{ getBonusTotalForMonth(total.month, "care") | number : "1.0-0" }}
          </td>
          <td class="amount-cell">
            {{
              getBonusTotalForMonth(total.month, "pension") | number : "1.0-0"
            }}
          </td>
          <td class="amount-cell total-cell">
            {{
              total.total + getBonusTotalForMonth(total.month, "total")
                | number : "1.0-0"
            }}
          </td>
        </tr>
      </tbody>
      <tfoot>
        <tr class="total-row">
          <td class="month-cell"><strong>年間合計</strong></td>
          <td class="amount-cell total-cell">
            <strong>{{ annualTotalHealth | number : "1.0-0" }}</strong>
          </td>
          <td class="amount-cell total-cell">
            <strong>{{ annualTotalCare | number : "1.0-0" }}</strong>
          </td>
          <td class="amount-cell total-cell">
            <strong>{{ annualTotalPension | number : "1.0-0" }}</strong>
          </td>
          <td class="amount-cell total-cell">
            <strong>{{
              bonusAnnualTotals.healthEmployee +
                bonusAnnualTotals.healthEmployer | number : "1.0-0"
            }}</strong>
          </td>
          <td class="amount-cell total-cell">
            <strong>{{
              bonusAnnualTotals.careEmployee + bonusAnnualTotals.careEmployer
                | number : "1.0-0"
            }}</strong>
          </td>
          <td class="amount-cell total-cell">
            <strong>{{
              bonusAnnualTotals.pensionEmployee +
                bonusAnnualTotals.pensionEmployer | number : "1.0-0"
            }}</strong>
          </td>
          <td class="amount-cell total-cell">
            <strong>{{
              annualTotal + bonusAnnualTotals.total | number : "1.0-0"
            }}</strong>
          </td>
        </tr>
      </tfoot>
    </table>
  </div>
</div>
